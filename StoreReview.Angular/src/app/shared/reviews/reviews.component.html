<form #ngForm [formGroup]="commentFormGroup" (ngSubmit)="addComment()">
    <div class="row">
        <div class="col-md-10 col-xs-12">
            <mat-form-field>
                <mat-chip-list #chipList aria-label="Reply to">
                    <mat-chip *ngIf="replyTo" [selectable]="true" [removable]="true" (removed)="removeReply(replyTo)">
                        {{replyTo.owner.firstName+ " " +replyTo.owner.lastName}}: {{replyTo.description}}
                        <mat-icon matChipRemove>cancel</mat-icon>
                    </mat-chip>
                    <textarea (click)="$event.stopPropagation()" matInput placeholder="Leave a comment" rows="4"
                        formControlName="description" required></textarea>
                </mat-chip-list>
            </mat-form-field>
        </div>
        <div class="col-md-2 col-xs-12">
            <mat-form-field>
                <input type="number" step="0.1" matInput placeholder="Ratting" min="0" max="10" [maxLength]="4"
                    formControlName="ratting">
                <mat-error *ngIf="commentFormGroup.get('ratting').invalid">Value must be betweeen 0 and 10.</mat-error>
            </mat-form-field>
            <button mat-raised-button style="width: 100%;" type="submit"
                [disabled]="commentFormGroup.invalid || !currentUserIsAuthenticated">Send</button>
        </div>
        <div *ngIf="!currentUserIsAuthenticated" class="col-12 auth-warning">
            <span>You must be authenticated for adding comments!</span>
        </div>
    </div>
</form>
<mat-divider class="divider"></mat-divider>
<ng-container #comments style="overflow: scroll; height: xyz;">
    <div class="row" *ngFor="let review of reviews" style="margin-bottom: 10px; font-size: 14px;">
        <div class="col-md-2 col-xs-12 margin-top-10">
            <img [src]="review.owner.pictureUrl ? review.owner.pictureUrl : 'https://www.searchpng.com/wp-content/uploads/2019/02/Deafult-Profile-Pitcher.png'"
                class="profile-picture">
            <span>{{review.owner.firstName + " " + review.owner.lastName}}</span>
        </div>
        <div class="col-md-10 col-xs-12" style="border-radius: 5px;
    background-color: #dfe3ee;">
            <div>
                <p class="comment-description margin-top-10">{{review.description}}</p>
                <span *ngIf="review.ratting" class="comment-ratting margin-top-10">
                    <mat-icon class="rate-icon">star_rate</mat-icon>{{review.ratting}}
                </span>
            </div>
            <div style="text-align: right; margin-top: 10px;">
                <div class="comment-date">{{review.date | date:'HH:mm MMM dd YYYY'}}</div>
                <div class="comment-reply-text" (click)="reply(review)">Reply</div>
                <div class="comment-likes">
                    <mat-icon class="reaction-icon reaction-icon-like">thumb_up</mat-icon>
                    <mat-icon class="reaction-icon reaction-icon-dislike">thumb_down</mat-icon>
                </div>
            </div>
        </div>

        <!-- <div *ngIf="review.hasReplies" class="repplies-content">
        <div class="view-replies-btn" (click)="loadReplies(review)">View Replies</div>
        <div *ngFor="let replyReview of review.replies" class="row" style="margin: 0px;">
            <div class="col-md-2 col-xs-12 margin-top-10">
                <span>{{replyReview.ownerFullName}}</span>
            </div>
            <div class="col-md-10 col-xs-12" style="border-radius: 5px;
            background-color: #dfe3ee;">
                <div>
                    <p class="comment-description margin-top-10">{{replyReview.description}}</p>
                    <span *ngIf="review.ratting" class="comment-ratting margin-top-10">
                        <mat-icon class="rate-icon">star_rate</mat-icon>{{replyReview.ratting}}
                    </span>
                </div>
                <div style="text-align: right; margin-top: 10px;">
                    <div class="comment-date">{{replyReview.date | date:'HH:mm MMM dd YYYY'}}</div>
                    <div class="comment-likes">
                        <mat-icon class="reaction-icon reaction-icon-like">thumb_up</mat-icon>
                        <mat-icon class="reaction-icon reaction-icon-dislike">thumb_down</mat-icon>
                    </div>
                </div>
            </div>
        </div>
    </div> -->
    </div>
</ng-container>
<div class="row">
    <div class="col-12">
        <span>{{inputPageResultModel.page}}/{{pageResultModel?.totalPages ? pageResultModel.totalPages : 1}}</span>
        <a *ngIf="inputPageResultModel.page < pageResultModel?.totalPages" (click)="loadComments()"
            class="load-more-comments-btn">
            <mat-icon style="    position: absolute;bottom: -2px; font-size: 20px;
            right: 150px;">add</mat-icon> Load more comments
        </a>
    </div>
</div>