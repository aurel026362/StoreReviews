<div>
    <slideshow class="slideshow" [height]="'400px'" [showArrows]="true" [autoPlay]="true"
        [imageUrls]="currentStore.photoUrls">
    </slideshow>
    <mat-accordion>
        <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Description
                </mat-panel-title>
                <mat-panel-description>
                    {{currentStore.title}}
                </mat-panel-description>
            </mat-expansion-panel-header>

            <p>{{currentStore.description}}</p>
        </mat-expansion-panel>
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Reviews
                </mat-panel-title>
                <mat-panel-description>
                    Rating: {{currentStore.rating}}
                </mat-panel-description>
            </mat-expansion-panel-header>
            <div *ngFor="let review of currentStore.reviews">
                <div style="display: inline-block;">
                    <b>{{review.user.email}}:</b>
                    <span> {{review.description}}</span>
                    <span style="font-size: 12px; color:gray;">({{review.date | date:'hh:mm dd/MM/yyyy' }})</span>
                </div>
                <div style="float:right; color: gray;width: 12%;
                        text-align: end; padding-top: 4px;">
                    <span><i class="far fa-thumbs-up icon-margin"></i>213</span>
                    <span><i class="far fa-thumbs-down icon-margin"></i>2</span>
                    <span style="margin-left: 10px; color:black; font-size: 16px;">{{review.ratting}}/10</span>
                </div>
                <br>
                <div style="display: inline-block; width: 80px; height: 50px; padding: 5px;"
                    *ngFor="let photoUrl of review.photoUrls">
                    <img [src]="photoUrl" style="width:100%; height:100%; cursor: pointer;"
                        (click)="openImage(review.photoUrls, photoUrl);">
                </div>
                <div style="margin-left: 20px;padding: 2px;">
                    <div *ngFor="let reply of review.replies" style="padding: 2px;">
                        <div><b>{{reply.user.email}}:</b>
                            <span> {{reply.description}}</span>
                            <span style="font-size: 12px; color:gray;">({{reply.date | date:'hh:mm dd/MM/yyyy' }})</span>
                        </div>
                        <div style="display: inline-block; width: 80px; height: 50px; padding: 5px;"
                            *ngFor="let photoUrl of reply.photoUrls">
                            <img [src]="photoUrl" style="width:100%; height:100%; cursor: pointer;"
                                (click)="openImage(reply.photoUrls, photoUrl);">
                        </div>

                    </div>
                    <div style="margin: 5px 10px 2px 6px"><span (click)="loadMoreReplies(review.id)"
                            class="load-items-text pointer"><i class="fas fa-plus"></i> Load other
                            replies...</span></div>
                    <!-- *ngIf="review.replies.length>10" -->
                    <hr style="margin-top: 5px;">
                </div>
            </div>
            <div><span (click)="loadMoreReplies(currentStore.id)" class="load-items-text pointer"><i
                        class="fas fa-plus"></i> Load other
                    comments...</span></div>
            <div>
                <form>
                    <div style="display: inline-block; width:88%;padding-right: 10px;">
                        <mat-form-field style="width:100%; margin:0px">
                            <textarea matInput placeholder="Leave a comment" rows="5"></textarea>
                        </mat-form-field>
                    </div>
                    <div style="display: inline-block; width:12%;padding-right: 5px;">
                        <mat-form-field style="width:100%">
                            <input type="number" step="0.1" matInput placeholder="Mark" [value]="currentStore.rating"
                                min="0" max="10" style="font-size: 25px; height: 30px;;">
                        </mat-form-field>
                        <button mat-raised-button style="width: 100%;bottom:5px">Send</button>
                    </div>
                </form>
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</div>